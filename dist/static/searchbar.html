
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>WeUI</title>
    <link rel="stylesheet" href="/css/weui.css"/>
    <link rel="stylesheet" href="/css/example.css"/>
</head>
<body ontouchstart>
<div class="container js_container">
    <div class="">
        <div class="hd">
            <h1 class="page_title">searchBar</h1>
        </div>
        <div class="bd">
            <!--<a href="javascript:;" class="weui_btn weui_btn_primary">点击展现searchBar</a>-->
            <div class="weui_search_bar" id="search_bar">
                <form class="weui_search_outer">
                    <div class="weui_search_inner">
                        <i class="weui_icon_search"></i>
                        <input type="text" class="weui_search_input" id="search_input" placeholder="搜索" required />
                        <a href="javascript:;" class="weui_icon_clear" id="search_clear"></a>
                    </div>
                    <label for="search_input" class="weui_search_text" id="search_text">
                        <i class="weui_icon_search"></i>
                        <span>搜索</span>
                    </label>
                </form>
                <a href="javascript:;" class="weui_search_cancel" id="search_cancel">取消</a>
            </div>
            <div class="weui_cells weui_cells_access search_show" id="search_show">
                <div class="weui_cell">
                    <div class="weui_cell_bd weui_cell_primary">
                        <p>实时搜索文本</p>
                    </div>
                </div>
                <div class="weui_cell">
                    <div class="weui_cell_bd weui_cell_primary">
                        <p>实时搜索文本</p>
                    </div>
                </div>
                <div class="weui_cell">
                    <div class="weui_cell_bd weui_cell_primary">
                        <p>实时搜索文本</p>
                    </div>
                </div>
                <div class="weui_cell">
                    <div class="weui_cell_bd weui_cell_primary">
                        <p>实时搜索文本</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
<!--<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>-->
<script src="/js/zepto.min.js"></script>
<!--<script src="/js/example.js"></script>-->
<script type="text/javascript">
    $(function(){
        /*var pageManager = {
            $container: $('.js_container'),
            _config: [],
            init: function(){
                var self = this;
                for(var i in this._config){
                    if (!config.isBind) {
                        this._bind(config);
                    }
                }
            },
            push: function (config) {
                this._configs.push(config);
                return this;
            },
            _find: function (key, value) {
                var page = null;
                for (var i = 0, len = this._configs.length; i < len; i++) {
                    if (this._configs[i][key] === value) {
                        page = this._configs[i];
                        break;
                    }
                }
                return page;
            },
            _bind: function (page) {
                var events = page.events || {};
                for (var t in events) {
                    for (var type in events[t]) {
                        this.$container.on(type, t, events[t][type]);
                    }
                }
                page.isBind = true;
            }
        }


        var search_bar = {
            name: 'searchbar',
            events: {
                '#search_input':{
                    focus:function(){
                        //searchBar
                        var $weuiSearchBar = $('#search_bar');
                        $weuiSearchBar.addClass('weui_search_focusing');
                    },
                    blur:function(){
                        var $weuiSearchBar = $('#search_bar');
                        $weuiSearchBar.removeClass('weui_search_focusing');
                        if($(this).val()){
                            $('#search_text').hide();
                        }else{
                            $('#search_text').show();
                        }
                    },
                    input:function(){
                        var $searchShow = $("#search_show");
                        if($(this).val()){
                            $searchShow.show();
                        }else{
                            $searchShow.hide();
                        }
                    }
                },
                "#search_cancel":{
                    touchend:function(){
                        $("#search_show").hide();
                        $('#search_input').val('');
                    }
                },
                "#search_clear":{
                    touchend:function(){
                        $("#search_show").hide();
                        $('#search_input').val('');
                    }
                }
            }
        }
        pageManager.push(search_bar).init();*/

        var searchbar = document.getElementById("search_bar");
        var searchinput = document.getElementById("search_input");
        var searchcancel = document.getElementById("search_cancel");
        var searchclear = document.getElementById("search_clear");

        searchinput.onfocus = function(){
            //searchBar
            var $weuiSearchBar = $('#search_bar');
            $weuiSearchBar.addClass('weui_search_focusing');
        };

        searchinput.onblur = function(){
            var $weuiSearchBar = $('#search_bar');
            $weuiSearchBar.removeClass('weui_search_focusing');
            if($(this).val()){
                $('#search_text').hide();
            }else{
                $('#search_text').show();
            }
        };

        searchinput.oninput = function(){
            var $searchShow = $("#search_show");
            if($(this).val()){
                $searchShow.show();
            }else{
                $searchShow.hide();
            }
        };

        searchcancel.addEventListener('touchend', function(e){
            $("#search_show").hide();
            $("#search_input").val("");
        });

        searchclear.addEventListener('touchend', function(e){
            $("#search_show").hide();
            $("#search_input").val("");
        });
    })
</script>
</html>
